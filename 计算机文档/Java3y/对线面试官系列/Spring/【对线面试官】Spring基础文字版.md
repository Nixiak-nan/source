3y：淦，已经熬到了第12面了

3y：评论区的兄弟们都叫我换公司了

3y：说这家公司就不想要我

3y：都已经面到12面了，还不录取

3y：算了算了，随便跟面试官聊聊呗



3y：面试官你好，请问面试可以开始了吗？

面试官：嗯，开始吧

面试官：我看到你的简历写着熟悉Spring

面试官：要不你来讲讲Spring 的IOC和AOP你是怎么理解的呗？

3y：嗯嗯，IOC和AOP是Spring非常核心的知识点

3y：我就先来讲讲Spring IOC？

面试官：嗯

3y：我个人理解下：Spring IOC 解决的是对象管理和对象依赖的问题。

3y：本来是我们自己手动new出来的对象，现在则把对象交给Spring的IOC容器管理

3y：IOC容器可以理解为一个对象工厂，我们都把该对象交给工厂，工厂管理这些对象的创建以及依赖关系

3y：等我们需要用对象的时候，从工厂里边获取就好了

面试官：嗯，说起IOC，就可以在网上或书籍经常看到的两个概念

3y：哦，你说的就是「控制反转」和「注入依赖」吧？

面试官：你怎么还抢答的咯...

面试官：那你顺便说说你对这两个概念的理解呗？

3y：我认为「控制反转」指的就是：把原有自己掌控的事交给别人去处理

3y：它更多的是一种思想或者可以理解为设计模式

3y：比如：本来由我们自己new出来的对象，现在交由IOC容器，把对象的控制权交给它方了

3y：而「依赖注入」在我的理解下，它其实是「控制反转」的实现方式

3y：对象无需自行创建或者管理它的依赖关系，依赖关系将被「自动注入」到需要它们的对象当中去

面试官：嗯，那我想问问，用Spring IOC有什么好处吗？

面试官：或者换个问法：本来我可以new出来的对象，为什么我要交由Spring IOC容器 管理呢？

3y：主要的好处在于「将对象集中统一管理」并且「降低耦合度」

3y：如果面试官理解了「工厂模式」，那就知道为什么我们不直接new对象

面试官：好家伙

面试官：不行，这答案我观众不满意！

3y：要说理由的话，可以举很多例子，比如说：

3y：我用Spring IOC 可以方便 单元测试、对象创建复杂、对象依赖复杂、单例等等的，什么都可以交给Spring IOC

3y：理论上自己new出来的都可以解决上面的问题，Spring在各种场景组合下有可能不是最优解

3y：但new出来的你要自己管理，可能你得自己写工厂，得实现一大套的东西才能满足需求

3y：写着写着有可能还是Spring的那一套

3y：但现在Spring现在已经帮你实现了啊！

3y：如果项目里的对象都是就new下就完事了，没有多个实现类，那没事，不用Spring也没啥问题

3y：并且Spring核心不仅仅IOC啊，除了把对象创建出来，还有一整套的Bean生命周期管理

3y：比如说你要实现对象增强，AOP不就有了吗？不然你还得自己创建代理..

面试官：好好好

面试官：但我看这届观众好像还是不太满意？

3y：不，他们已经满意了。



面试官：那你继续来聊下Spring AOP呗？

3y：Spring AOP 解决的是 非业务代码抽取的问题

3y：AOP 底层的技术是动态代理，在Spring内实现依赖的是BeanPostProcessor

3y：比如我们需要在方法上注入些「重复性」的非业务代码，就可以利用Spring AOP

3y：所谓的「面向切面编程」在我理解下其实就是在方法前后增加非业务代码

面试官：那你在工作中实际用到过AOP去优化你的代码吗？

3y：有的。当时我用AOP来对我们公司现有的监控客户端进行封装

3y：一个系统离不开监控，监控基本的指标有QPS、RT、ERROR等等

3y：对外暴露的监控客户端只能在代码里写对应的上报信息（灵活，但会与业务代码掺杂在一起）

3y：于是我利用注解+AOP的方式封装了一把，只要方法/类上带有我自定义的注解

3y：方法被调用时，就会上报AQS、RT等信息

3y：实现了非业务代码与业务代码分离的效果（：

面试官：你们项目一般是怎么把对象交给IOC容器管理的？

面试官：换个问法：一般是怎么定义Bean的？

3y：Spring提供了4种方式，分别是：

3y：1):注解     2):XML    3):JavaConfig     4):基于Groovy DSL配置

3y：一般项目我们用注解或XML比较多，少部分用JavaConfig

3y：日常写业务代码一般用注解来定义各种对象，责任链这种一般配置在XML，「注解」解决不了的就用JavaConfig

3y：总体而言，还是得看项目的代码风格吧（：

3y：反正就是定义元数据，能给到Spring解析就好了

面试官：嗯，了解。





面试官：要不来聊聊你使用Spring的感受？

3y：嗯嗯..

3y：当我还是初学Spring的时候，我觉得Spring很麻烦，需要有一大堆的配置信息才能跑起来

3y：光是搭建环境就需要耗费我好长的时间

3y：毕竟版本冲突，依赖冲突什么的就可能一个下午就过去了

3y：但毕竟一个系统环境只搭一次嘛，所以还好

3y：（后来用上了SpringBoot这又更方便了）

面试官：...

3y：话说回来，IOC和AOP在工作用的时候还是很爽的

3y：毕竟搞个注解什么的，配置下就可以把对象交给Spring管理了

3y：配合Spring的生态，@Transactional注解什么的，都好用得飞起

3y：不过，Spring给我们封装得太好了

3y：经常就会有奇奇怪怪的”bug“出现，也踩过很多的坑了

3y：Bean经常没办法创建成功，导致项目启动失败

3y：对象的循环依赖问题...

3y：同一个接口，多个实现，识别不出我要创建哪个对象...

3y：为什么catch了异常，Spring事务为什么还会自动回滚

3y：等等等.....

面试官：...

3y：总的来说，Spring给我们封装了一个很好的环境，实现对我们屏蔽了

3y：但是如果理解不深的话，很有可能就会触发各种bug

面试官：了解

3y：面试官怎么不问点原理实现的？

面试官：不着急

面试官：下次吧，下次一定









 